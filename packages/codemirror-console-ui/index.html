<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="node_modules/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="components/mirror-console-compoenent.css">
    <style>
        body {font-size : 16px;}
        pre{border: 2px solid #ddd}
    </style>
</head>
<body>

<div class="paragraph">
<p>Example</p>
</div>
<div class="listingblock executable">
<div class="title">xhr-promise.js</div>
<div class="content">
<pre class="CodeRay"><code class="javascript language-javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;
<span class="keyword">function</span> <span class="function">getURL</span>(URL) {
    <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="keyword">function</span> (resolve, reject) {
        <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();
        req.open(<span class="string"><span class="delimiter">'</span><span class="content">GET</span><span class="delimiter">'</span></span>, URL, <span class="predefined-constant">true</span>);
        req.<span class="function">onload</span> = <span class="keyword">function</span> () {
            <span class="keyword">if</span> (req.status == <span class="integer">200</span>) {
                resolve(req.response);
            } <span class="keyword">else</span> {
                reject(<span class="keyword">new</span> Error(req.statusText));
            }
        };
        req.<span class="function">onerror</span> = <span class="keyword">function</span> () {
            reject(<span class="keyword">new</span> Error(req.statusText));
        };
        req.send();
    });
}
<span class="comment">// 実行例</span>
<span class="keyword">var</span> URL = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://httpbin.org/get</span><span class="delimiter">&quot;</span></span>;
getURL(URL).then(<span class="keyword">function</span> <span class="function">onFulfilled</span>(value){
    console.log(value);
}).<span class="keyword">catch</span>(console.error.bind(console));</code></pre>
</div>
</div>



<div class="paragraph">
    <p>Example2</p>
</div>
<div class="listingblock executable">
    <div class="title">xhr-promise.js</div>
    <div class="content">
<pre class="CodeRay"><code class="javascript language-javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;
    <span class="keyword">function</span> <span class="function">getURL</span>(URL) {
    <span class="keyword">return</span> <span class="keyword">new</span> Promise(<span class="keyword">function</span> (resolve, reject) {
    <span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();
    req.open(<span class="string"><span class="delimiter">'</span><span class="content">GET</span><span class="delimiter">'</span></span>, URL, <span class="predefined-constant">true</span>);
    req.<span class="function">onload</span> = <span class="keyword">function</span> () {
    <span class="keyword">if</span> (req.status == <span class="integer">200</span>) {
    resolve(req.response);
    } <span class="keyword">else</span> {
    reject(<span class="keyword">new</span> Error(req.statusText));
    }
    };
    req.<span class="function">onerror</span> = <span class="keyword">function</span> () {
    reject(<span class="keyword">new</span> Error(req.statusText));
    };
    req.send();
    });
    }
    <span class="comment">// 実行例</span>
    <span class="keyword">var</span> URL = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://httpbin.org/get</span><span class="delimiter">&quot;</span></span>;
    getURL(URL).then(<span class="keyword">function</span> <span class="function">onFulfilled</span>(value){
    console.log(value);
    }).<span class="keyword">catch</span>(console.error.bind(console));</code></pre>
    </div>
</div>
<script src="app/bundle.js"></script>
</body>
</html>